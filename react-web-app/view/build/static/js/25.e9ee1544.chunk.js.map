{"version":3,"sources":["components/employees/EmployeeDetails.js"],"names":["EmployeeDetails","location","useLocation","history","useHistory","useState","count","setCount","inputFile","useRef","avatar","setAvatar","image","setImage","user_data","setUserData","email","setEmail","username","setUsername","first_name","setFirstName","last_name","setLastName","phone","setPhone","registration","setRegistration","address","setAddress","designation","setDesignation","onButtonClick","current","click","React","useEffect","undefined","state","PUBLIC_API","get","employee","id","then","res","console","log","data","success","BASE_URL","profile_pic","className","md","class","onClick","src","name","type","ref","style","display","onChange","event","file","target","files","URL","createObjectURL","value","placeholder","autoComplete","custom","hidden","color","formData","FormData","append","FILE_API","post","swal","catch","err","response","update_profile","push"],"mappings":"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","file":"static/js/25.e9ee1544.chunk.js","sourcesContent":["import React,{useState,useRef} from 'react'\r\nimport { CSelect,CCard, CRow,CCol,CCardBody,CCardFooter,CCardHeader,CForm,CTextarea,CInputGroupText,CInput,CInputGroup,CInputGroupPrepend,CButton,CImg } from '@coreui/react'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport CIcon from \"@coreui/icons-react\"\r\nimport { BASE_URL, FILE_API, PUBLIC_API } from 'src/config'\r\nimport swal from 'sweetalert' \r\nimport \"../employees/Create.css\";\r\nconst EmployeeDetails =()=>{\r\n    let location = useLocation()\r\n    let history = useHistory()\r\n    const [count,setCount] = useState(0)\r\n    const inputFile = useRef(null) \r\n    const [avatar,setAvatar] = useState()\r\n    const [image,setImage]=useState()\r\n    const [user_data,setUserData] = useState(null)\r\n    const [email,setEmail] = useState('')\r\n    const [username,setUsername]=useState('')\r\n    const [first_name,setFirstName]=useState('')\r\n    const [last_name,setLastName] = useState('')\r\n    const [phone,setPhone] = useState('')\r\n    const [registration,setRegistration] = useState('')\r\n    const [address,setAddress] = useState('')\r\n    const [designation,setDesignation] = useState(\"\")\r\n    const checkProp =()=>{\r\n        console.log(location.state)\r\n        if(location.state.employee == undefined){\r\n            history.push('/dashboard/employees')\r\n        }\r\n    }\r\n    function onImageChange(file){\r\n        setImage(file)\r\n        setAvatar(URL.createObjectURL(file))\r\n        //update_profile()\r\n    }\r\n    const onButtonClick = () => {\r\n        // `current` points to the mounted file input element\r\n       inputFile.current.click();\r\n    };\r\n    function update_profile(){\r\n        var formData = new FormData();\r\n        formData.append(\"username\", username);\r\n        formData.append(\"first_name\", first_name); // number 123456 is immediately converted to a string \"123456\"\r\n        formData.append(\"last_name\", last_name);\r\n        formData.append(\"phone\", phone);\r\n        formData.append(\"email\", email);\r\n        formData.append(\"address\", address);\r\n        formData.append(\"registration\", registration);\r\n        formData.append(\"designation\", designation);\r\n        // HTML file input, chosen by user\r\n        if(image!=undefined){\r\n            formData.append(\"profile_pic\", image);\r\n        }\r\n        FILE_API.post('employee/profile/update/'+location.state.employee.id+'/',formData).then((res)=>{\r\n            console.log('update result ---- ',res.data)\r\n            if(res.data.success==\"True\"){\r\n                swal('Updated','Profile updated successfully','success')\r\n            }\r\n        }).catch((err)=>{\r\n            console.log('err -- ',err.response)\r\n        })\r\n    }\r\n    React.useEffect(()=>{\r\n        if(location.state!=undefined){\r\n            PUBLIC_API.get(\"profile/details/\"+location.state.employee.id+\"/\").then((res)=>{\r\n                console.log('res --- ',res.data)\r\n                if(res.data.success == \"True\"){\r\n                    setAvatar(BASE_URL+res.data.data.profile_pic)\r\n                    setUserData(res.data.data)\r\n                    setEmail(res.data.data.email)\r\n                    setUsername(res.data.data.username)\r\n                    setFirstName(res.data.data.first_name)\r\n                    setLastName(res.data.data.last_name)\r\n                    setPhone(res.data.data.phone)\r\n                    setRegistration(res.data.data.registration)\r\n                    setAddress(res.data.data.address)\r\n                }\r\n            })\r\n        }\r\n        setCount(1)\r\n    },[count])\r\n    return(\r\n        <>\r\n        {location.state ? \r\n        <CRow className=\"justify-content-center\">\r\n            <CCol md=\"8\">\r\n                {user_data!=null && <CCard>\r\n                    <CCardHeader>\r\n                        <h3>Details of <strong>{user_data.first_name+' '+user_data.last_name}</strong></h3>\r\n                    </CCardHeader>\r\n                    <CCardBody>\r\n                            <CRow className=\"justify-content-center\">\r\n                            <div class=\"seller-profile-pic-div text-center\">\r\n                                <CImg onClick={onButtonClick} className=\"mx-auto rounded-circle update-img\"  src={avatar} />\r\n                                <button onClick={onButtonClick} className=\"d-block mx-auto btn btn-primary mt-1\">\r\n                    {\" \"}\r\n                    <CIcon name=\"cil-camera\"></CIcon> Update Picture\r\n                  </button>\r\n                            </div>\r\n                            </CRow>\r\n                            <hr/>\r\n                            <CRow className=\"justify-content-center\">\r\n                                <input type='file' id='file' ref={inputFile} style={{display: 'none'}} onChange={(event)=>onImageChange(event.target.files[0])}/>\r\n                                {/* <CButton type=\"button\" onClick={onButtonClick}>change</CButton> */}\r\n                            </CRow>\r\n                            <CInputGroup className=\"mb-3\">\r\n                                <CInputGroupPrepend>\r\n                                    <CInputGroupText>\r\n                                    First Name\r\n                                    </CInputGroupText>\r\n                                </CInputGroupPrepend>\r\n                                <CInput value={first_name} onChange={(event)=>setFirstName(event.target.value)} type=\"text\" placeholder=\"First Name\" autoComplete=\"first_name\" />\r\n                            </CInputGroup>\r\n                            <CInputGroup className=\"mb-3\">\r\n                                <CInputGroupPrepend>\r\n                                    <CInputGroupText>\r\n                                    Last Name\r\n                                    </CInputGroupText>\r\n                                </CInputGroupPrepend>\r\n                                <CInput value={last_name} onChange={(event)=>setLastName(event.target.value)} type=\"text\" placeholder=\"Last Name\" autoComplete=\"last_name\" />\r\n                            </CInputGroup>\r\n                            <CInputGroup className=\"mb-3\">\r\n                                <CInputGroupPrepend>\r\n                                    <CInputGroupText>\r\n                                    Email\r\n                                    </CInputGroupText>\r\n                                </CInputGroupPrepend>\r\n                                <CInput value={email} onChange={(event)=>setEmail(event.target.value)} type=\"email\" placeholder=\"Email\" autoComplete=\"email\" />\r\n                            </CInputGroup>\r\n                            <CInputGroup className=\"mb-4\">\r\n                                <CInputGroupPrepend>\r\n                                    <CInputGroupText>\r\n                                    Phone\r\n                                    </CInputGroupText>\r\n                                </CInputGroupPrepend>\r\n                                <CInput type=\"text\" placeholder=\"Phone\" value={phone} onChange={(event)=>setPhone(event.target.value)}  />\r\n                            </CInputGroup>\r\n                            <CInputGroup className=\"mb-4\">\r\n                                <CInputGroupPrepend>\r\n                                    <CInputGroupText>\r\n                                    Registration\r\n                                    </CInputGroupText>\r\n                                </CInputGroupPrepend>\r\n                                <CInput type=\"text\" placeholder=\"mac\" autoComplete=\"mac\" value={registration} onChange={(event)=>setRegistration(event.target.value)}  />\r\n                            </CInputGroup>\r\n                            <CInputGroup className=\"mb-4\">\r\n                                <CInputGroupPrepend>\r\n                                    <CInputGroupText>\r\n                                    Designation\r\n                                    </CInputGroupText>\r\n                                </CInputGroupPrepend>\r\n                                <CInput type=\"text\" placeholder=\"mac\" autoComplete=\"mac\" value={designation} onChange={(event)=>setDesignation(event.target.value)}  />\r\n                            </CInputGroup>\r\n                            <CInputGroup className=\"mb-4\">\r\n                                <CInputGroupPrepend>\r\n                                    <CInputGroupText>\r\n                                    Address\r\n                                    </CInputGroupText>\r\n                                </CInputGroupPrepend>\r\n                                <CTextarea type=\"text\" placeholder=\"Phone\" value={address} onChange={(event)=>setAddress(event.target.value)} />\r\n                            </CInputGroup>\r\n                            {/**supervisor name */}\r\n                            <CInputGroup className=\"mb-4\">\r\n                                <CInputGroupPrepend>\r\n                                    <CInputGroupText>\r\n                                    Supervisor Name\r\n                                    </CInputGroupText>\r\n                                </CInputGroupPrepend>\r\n                                <CSelect custom name=\"superName\" id=\"superName\">\r\n                              <option hidden>Supervisor Name</option>\r\n                              <option value=\"1\">Imon Karim</option>\r\n                              <option value=\"2\">Ratan Hassan</option>\r\n                              <option value=\"3\">Santiago Vasquez</option>\r\n                              <option value=\"4\">Hasibul Hassan</option>\r\n                              <option value=\"5\">Saif Azad</option>\r\n                            </CSelect>\r\n                            </CInputGroup>\r\n                            {/* <CRow>\r\n                                <CCol xs=\"12\" md=\"12\">\r\n                                    \r\n                                </CCol>\r\n                            </CRow> */}\r\n                    </CCardBody>\r\n                    <CCardFooter>\r\n                        <CButton color=\"primary\" className=\"px-4\" type=\"button\" onClick={()=>update_profile()}>Update</CButton>\r\n                    </CCardFooter>\r\n                </CCard>}\r\n            </CCol>\r\n        </CRow>:history.push('/dashboard/employees')}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default EmployeeDetails"],"sourceRoot":""}