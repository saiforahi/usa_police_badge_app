(this["webpackJsonpusa-nfc-web-app"]=this["webpackJsonpusa-nfc-web-app"]||[]).push([[13],{741:function(e,t,a){"use strict";var n=a(25),c=a.n(n),o=a(45),s=a(735),r=a(0),i=a.n(r),l=a(733),d=(a(734),a(829)),b=a(51),j=a(15);var u=function(e){var t=e.text;return Object(j.jsx)("div",{children:t})};t.a=function(e){var t=Object(r.useState)({}),a=Object(s.a)(t,2),n=a[0],h=a[1],m=Object(r.useState)([]),p=Object(s.a)(m,2),f=(p[0],p[1]),O=Object(r.useState)({borderColor:"",borderStyle:""}),x=Object(s.a)(O,2),g=(x[0],x[1],Object(r.useState)()),y=Object(s.a)(g,2);y[0],y[1];return i.a.useEffect((function(){console.log("props data --- ",e.data),e.data.user_id?b.e.get("profile/details/"+e.data.user_id+"/").then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("lat from res --- ",t.data.data),h(t.data.data),f([Number(t.data.data.lat),Number(t.data.data.lng)]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):b.e.get("profile/details/"+e.notification.user_id+"/").then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("lat from res --- ",t.data.data),h(t.data.data),f([Number(t.data.data.lat),Number(t.data.data.lng)]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{id:"wrapper",children:Object(j.jsxs)(l.e,{children:[Object(j.jsx)(l.i,{children:Object(j.jsx)("h3",{children:"Details of Card Owner"})}),Object(j.jsxs)(l.f,{children:[Object(j.jsx)(l.T,{className:"justify-content-center mb-3",children:Object(j.jsx)(l.l,{children:Object(j.jsx)(l.B,{className:"mx-auto rounded-circle",style:{height:"100px",width:"100px"},shape:"rounded",src:b.b+n.profile_pic})})}),Object(j.jsx)(l.T,{children:Object(j.jsx)(l.l,{children:Object(j.jsxs)("p",{className:"text-left",children:[Object(j.jsx)("strong",{children:"Name :"})," ",n.first_name+" "+n.last_name,Object(j.jsx)("br",{}),Object(j.jsx)("strong",{children:"Email :"})," ",n.email,Object(j.jsx)("br",{}),Object(j.jsx)("strong",{children:"Phone :"})," ",n.phone,Object(j.jsx)("br",{}),Object(j.jsx)("strong",{children:"Registration :"})," ",n.registration,Object(j.jsx)("br",{}),Object(j.jsx)("strong",{children:"Address :"})," ",n.address,Object(j.jsx)("br",{})]})})}),Object(j.jsx)(l.T,{children:Object(j.jsxs)("div",{style:{height:"250px",width:"100%"},children:[Object(j.jsxs)("div",{className:"mb-2",children:["Lat : ",n.lat," & Lng: ",n.lng," "]}),Object(j.jsx)(d.a,{bootstrapURLKeys:{key:"AIzaSyCbynC4V9qRGyQTR5-ssW8qb0yX4oNNnKc"},defaultCenter:{lat:23.7104,lng:90.4074},defaultZoom:11,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){e.map,e.maps},children:Object(j.jsx)(u,{lat:23.7104,lng:90.4074})})]})})]})]})})})}},764:function(e,t,a){},798:function(e,t,a){},879:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(33),s=a(735),r=a(22),i=a(733),l=(a(764),a(189)),d=[{path:"/dashboard",exact:!0,name:"Dashboard",component:c.a.lazy((function(){return Promise.all([a.e(2),a.e(14)]).then(a.bind(null,856))}))},{path:"/dashboard/employees",exact:!0,name:"Employees",component:c.a.lazy((function(){return a.e(26).then(a.bind(null,857))}))},{path:"/dashboard/employees/details",exact:!0,name:"Employee Details",component:c.a.lazy((function(){return a.e(25).then(a.bind(null,858))}))},{path:"/dashboard/employees/create",exact:!0,name:"Create Employee",component:c.a.lazy((function(){return a.e(24).then(a.bind(null,859))}))},{path:"/dashboard/badges/",exact:!0,name:"Badges",component:c.a.lazy((function(){return Promise.all([a.e(9),a.e(17)]).then(a.bind(null,893))}))},{path:"/dashboard/account/",exact:!0,name:"Account",component:c.a.lazy((function(){return a.e(16).then(a.bind(null,866))}))},{path:"/dashboard/contacts/",exact:!0,name:"Contacts",component:c.a.lazy((function(){return a.e(19).then(a.bind(null,894))}))},{path:"/dashboard/billing/",exact:!0,name:"Billing",component:c.a.lazy((function(){return a.e(18).then(a.bind(null,867))}))},{path:"/dashboard/time",exact:!0,name:"Time",component:c.a.lazy((function(){return a.e(23).then(a.bind(null,868))}))},{path:"/dashboard/sitecontrol",exact:!0,name:"Site Control",component:c.a.lazy((function(){return a.e(22).then(a.bind(null,869))}))},{path:"/dashboard/scan-history",exact:!0,name:"Scan History",component:c.a.lazy((function(){return a.e(31).then(a.bind(null,870))}))},{path:"/dashboard/account/personal",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(4).then(a.bind(null,871))}))}],b=[{path:"/dashboard",exact:!0,name:"Dashboard",component:c.a.lazy((function(){return Promise.all([a.e(2),a.e(15)]).then(a.bind(null,872))}))},{path:"/dashboard/account/personal",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(4).then(a.bind(null,871))}))},{path:"/dashboard/account/badge",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(28).then(a.bind(null,873))}))},{path:"/dashboard/account/time",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(30).then(a.bind(null,874))}))},{path:"/dashboard/account/contacts",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(21).then(a.bind(null,875))}))},{path:"/dashboard/officer/contacts/edit",exact:!0,name:"Edit Contact",component:c.a.lazy((function(){return a.e(27).then(a.bind(null,876))}))},{path:"/dashboard/officer/scans/history",exact:!0,name:"Scan History",component:c.a.lazy((function(){return a.e(29).then(a.bind(null,877))}))}],j=a(15),u=Object(j.jsx)("div",{className:"pt-3 text-center",children:Object(j.jsx)("div",{className:"sk-spinner sk-spinner-pulse"})}),h=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1];return c.a.useEffect((function(){switch(localStorage.getItem("group")){case"admin":l(d);break;case"officer":l(b)}}),[]),Object(j.jsxs)("main",{className:"c-main",children:[Object(j.jsx)("div",{class:"hero-image"}),Object(j.jsx)(i.m,{className:"mt-4",children:Object(j.jsx)(n.Suspense,{fallback:u,children:Object(j.jsxs)(r.d,{children:[a.map((function(e,t){return e.component&&Object(j.jsx)(r.b,{path:e.path,exact:e.exact,name:e.name,render:function(t){return Object(j.jsx)(i.s,{children:Object(j.jsx)(e.component,Object(o.a)({},t))})}},t)})),Object(j.jsx)(r.a,{from:"/",to:"/dashboard"})]})})})]})},m=c.a.memo(h),p=function(){return Object(j.jsx)(i.t,{fixed:!1,children:Object(j.jsxs)("div",{className:"mfs-auto",children:[Object(j.jsx)("span",{className:"mr-1",children:"Powered by"}),Object(j.jsx)("a",{href:"https://theaccountabilitybadge.com/",target:"_blank",rel:"noopener noreferrer",children:"ISK"})]})})},f=c.a.memo(p),O=a(197),x=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.sidebar.sidebarShow}));return c.a.useEffect((function(){console.log("sidebar --- ",t)}),[]),Object(j.jsxs)(i.x,{withSubheader:!0,children:[Object(j.jsx)(i.fb,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var a=!![!1,"responsive"].includes(t)||"responsive";e(Object(O.a)(a))}}),Object(j.jsx)(i.fb,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var a=![!0,"responsive"].includes(t)&&"responsive";e(Object(O.a)(a))}}),Object(j.jsx)(i.y,{className:"d-md-down-none mr-auto",children:Object(j.jsx)(i.z,{className:"px-3",children:Object(j.jsx)(i.A,{to:"/dashboard",children:"Dashboard"})})}),Object(j.jsx)(i.y,{className:"px-3",children:Object(j.jsx)(N,{})})]})},g=a(734),y=a(51),v=a(190),N=function(){var e=Object(l.c)((function(e){return e.user.data.first_name?e.user.data.first_name+" "+e.user.data.last_name:"loading..."})),t=Object(l.c)((function(e){return e.user.data.profile_pic})),a=Object(r.g)(),n=Object(l.b)();return Object(j.jsxs)(i.o,{inNav:!0,className:"c-header-nav-items mx-2",direction:"down",children:[Object(j.jsxs)(i.r,{className:"c-header-nav-link",caret:!1,children:[Object(j.jsx)("div",{className:"c-avatar",children:Object(j.jsx)(i.B,{src:null!=t?y.b+t:"assets/images/avatar.png",className:"c-avatar-img",alt:""})}),Object(j.jsx)("span",{style:{marginLeft:"8px"},children:e})]}),Object(j.jsxs)(i.q,{className:"pt-0",placement:"bottom-end",children:[Object(j.jsx)(i.p,{header:!0,tag:"div",color:"light",className:"text-center",children:Object(j.jsx)("strong",{children:"Account"})}),Object(j.jsxs)(i.p,{onClick:function(){y.a.get("logout/"+localStorage.getItem("user_id")+"/").then((function(e){console.log(e.status),!0===e.data.success?(localStorage.clear(),n(Object(v.c)()),a.push("/login")):401==e.status&&(localStorage.clear(),a.push("/login"))})).catch((function(e){"401"==e.response.status&&(localStorage.clear(),a.push("/login"))}))},children:[Object(j.jsx)(g.b,{name:"cil-account-logout",className:"mfe-2"}),"Logout"]})]})]})},S=(a(798),function(){var e=Object(l.b)(),t=Object(r.g)(),a=Object(l.c)((function(e){return e.sidebar.sidebarShow})),o=Object(l.c)((function(e){return e.user.data.badge_number})),d=c.a.useState(""),b=Object(s.a)(d,2),u=b[0],h=b[1];return Object(n.useEffect)((function(){h(localStorage.getItem("group"))}),[]),Object(j.jsxs)(i.V,{show:a,onShowChange:function(t){return e(Object(O.a)(t))},children:[Object(j.jsx)(i.W,{className:"d-md-down-none text-center",to:"/",children:Object(j.jsx)("img",{src:"assets/images/nypd.png",className:"sidebar-brand"})}),"officer"==u&&Object(j.jsxs)(i.W,{className:"d-md-down-none text-center",children:["Badge : ",o]}),"admin"==u&&Object(j.jsxs)(i.Y,{children:[Object(j.jsx)(i.Z,{to:"/dashboard",icon:"cil-speedometer",name:"Dashboard"}),Object(j.jsx)(i.ab,{children:"Administration"}),Object(j.jsx)(i.Z,{to:"/dashboard/employees",onClick:function(){t.push("/dashboard/users/show")},icon:"cil-group",name:"Employees"}),Object(j.jsx)(i.Z,{to:"/dashboard/badges",icon:"cil-badge",name:"Badges"}),Object(j.jsx)(i.Z,{to:"/dashboard/scan-history",icon:"cil-people",name:"Scans"}),Object(j.jsx)(i.Z,{to:"/dashboard/sitecontrol",icon:"cil-control",name:"Site Control"}),Object(j.jsx)(i.Z,{to:"/dashboard/time",icon:"cil-clock",name:"Time"}),Object(j.jsx)(i.Z,{to:"/dashboard/account",icon:"cil-calculator",name:"Account"}),Object(j.jsx)(i.Z,{to:"/dashboard/billing",icon:"cil-money",name:"Billing"}),Object(j.jsx)(i.Z,{to:"/dashboard/contacts",icon:"cil-people",name:"Contacts"})]}),"officer"==u&&Object(j.jsxs)(i.Y,{children:[Object(j.jsx)(i.Z,{to:"/dashboard",icon:"cil-speedometer",name:"Dashboard"}),Object(j.jsx)(i.ab,{children:"Personal Account"}),Object(j.jsx)(i.Z,{to:"/dashboard/account/personal",onClick:function(){t.push("/dashboard/account/personal")},icon:"cil-notes",name:"Account"}),Object(j.jsx)(i.Z,{to:"/dashboard/account/time",onClick:function(){t.push("/dashboard/account/time")},icon:"cil-clock",name:"Time"}),Object(j.jsx)(i.Z,{to:"/dashboard/account/badge",onClick:function(){t.push("/dashboard/account/badge")},icon:"cil-credit-card",name:"My Badge"}),Object(j.jsx)(i.Z,{to:"/dashboard/account/contacts",onClick:function(){t.push("/dashboard/account/contacts")},icon:"cil-people",name:"Contacts"})]}),Object(j.jsx)(i.X,{className:"c-d-md-down-none"})]})}),w=c.a.memo(S),k=a(417),C=a(741),z=a(742),_=a.n(z),A=a(191),Z=a(192),E=a(193),I=a(428);t.default=function(){var e=Object(I.b)(),t=e.enqueueSnackbar,a=(e.closeSnackbar,Object(l.b)()),c=(Object(r.g)(),new k.WebSocketBridge);return Object(n.useEffect)((function(){a(Object(v.b)(localStorage.getItem("user_id"))),c.connect("ws://103.123.8.52:8075/nfc/notifications"),c.addEventListener("message",(function(e){console.log(e.data),"review.notification"==e.data.type?(t(e.data.officer_name+" got rated by "+e.data.name,{variant:"info"}),a(Object(E.b)())):(a(Object(A.b)()),a(Object(Z.b)()),t(e.data.officer_name+"'s badge ("+e.data.badge_number+") got scanned",{variant:"info"}),_()({content:Object(j.jsx)(C.a,{data:e.data}),buttons:[!1,"Close"]}))}))}),[]),Object(j.jsxs)(j.Fragment,{children:[!1===(null!==localStorage.getItem(y.f)&&""!==localStorage.getItem(y.f))&&Object(j.jsx)(r.a,{to:"/login"}),Object(j.jsxs)("div",{className:"c-app c-default-layout",children:[Object(j.jsx)(w,{}),Object(j.jsxs)("div",{className:"c-wrapper",children:[Object(j.jsx)(x,{}),Object(j.jsx)("div",{className:"c-body",children:Object(j.jsx)(m,{})}),Object(j.jsx)(f,{})]})]})]})}}}]);
//# sourceMappingURL=13.69b0f974.chunk.js.map