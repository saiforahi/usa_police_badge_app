(this["webpackJsonpusa-nfc-web-app"]=this["webpackJsonpusa-nfc-web-app"]||[]).push([[13],{757:function(e,n,a){},792:function(e,n,a){},869:function(e,n,a){"use strict";a.r(n);var t=a(0),c=a.n(t),o=a(33),s=a(735),r=a(23),i=a(732),l=(a(757),a(189)),d=[{path:"/dashboard",exact:!0,name:"Dashboard",component:c.a.lazy((function(){return Promise.all([a.e(2),a.e(3)]).then(a.bind(null,883))}))},{path:"/dashboard/employees",exact:!0,name:"Employees",component:c.a.lazy((function(){return a.e(23).then(a.bind(null,849))}))},{path:"/dashboard/employees/details",exact:!0,name:"Employee Details",component:c.a.lazy((function(){return a.e(22).then(a.bind(null,850))}))},{path:"/dashboard/employees/create",exact:!0,name:"Create Employee",component:c.a.lazy((function(){return a.e(21).then(a.bind(null,851))}))},{path:"/dashboard/badges/",exact:!0,name:"Badges",component:c.a.lazy((function(){return Promise.all([a.e(9),a.e(15)]).then(a.bind(null,884))}))},{path:"/dashboard/account/",exact:!0,name:"Account",component:c.a.lazy((function(){return a.e(14).then(a.bind(null,858))}))},{path:"/dashboard/contacts/",exact:!0,name:"Contacts",component:c.a.lazy((function(){return a.e(17).then(a.bind(null,859))}))},{path:"/dashboard/billing/",exact:!0,name:"Billing",component:c.a.lazy((function(){return a.e(16).then(a.bind(null,860))}))},{path:"/dashboard/time",exact:!0,name:"Time",component:c.a.lazy((function(){return a.e(20).then(a.bind(null,861))}))},{path:"/dashboard/sitecontrol",exact:!0,name:"Site Control",component:c.a.lazy((function(){return a.e(19).then(a.bind(null,862))}))},{path:"/dashboard/scan-history",exact:!0,name:"Scan History",component:c.a.lazy((function(){return a.e(27).then(a.bind(null,863))}))},{path:"/dashboard/account/personal",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(5).then(a.bind(null,864))}))}],b=[{path:"/dashboard",exact:!0,name:"Dashboard",component:c.a.lazy((function(){return Promise.all([a.e(2),a.e(3)]).then(a.bind(null,883))}))},{path:"/dashboard/account/personal",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(5).then(a.bind(null,864))}))},{path:"/dashboard/account/badge",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(25).then(a.bind(null,865))}))},{path:"/dashboard/account/time",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(26).then(a.bind(null,866))}))},{path:"/dashboard/account/contacts",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(24).then(a.bind(null,867))}))}],u=a(15),j=Object(u.jsx)("div",{className:"pt-3 text-center",children:Object(u.jsx)("div",{className:"sk-spinner sk-spinner-pulse"})}),m=function(){var e=Object(t.useState)([]),n=Object(s.a)(e,2),a=n[0],l=n[1];return c.a.useEffect((function(){switch(localStorage.getItem("group")){case"admin":l(d);break;case"officer":l(b)}}),[]),Object(u.jsxs)("main",{className:"c-main",children:[Object(u.jsx)("div",{class:"hero-image"}),Object(u.jsx)(i.m,{className:"mt-4",children:Object(u.jsx)(t.Suspense,{fallback:j,children:Object(u.jsxs)(r.d,{children:[a.map((function(e,n){return e.component&&Object(u.jsx)(r.b,{path:e.path,exact:e.exact,name:e.name,render:function(n){return Object(u.jsx)(i.s,{children:Object(u.jsx)(e.component,Object(o.a)({},n))})}},n)})),Object(u.jsx)(r.a,{from:"/",to:"/dashboard"})]})})})]})},h=c.a.memo(m),p=function(){return Object(u.jsx)(i.t,{fixed:!1,children:Object(u.jsxs)("div",{className:"mfs-auto",children:[Object(u.jsx)("span",{className:"mr-1",children:"Powered by"}),Object(u.jsx)("a",{href:"https://theaccountabilitybadge.com/",target:"_blank",rel:"noopener noreferrer",children:"ISK"})]})})},f=c.a.memo(p),x=a(196),O=function(){var e=Object(l.b)(),n=Object(l.c)((function(e){return e.sidebar.sidebarShow}));return c.a.useEffect((function(){console.log("sidebar --- ",n)}),[]),Object(u.jsxs)(i.x,{withSubheader:!0,children:[Object(u.jsx)(i.fb,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var a=!![!1,"responsive"].includes(n)||"responsive";e(Object(x.a)(a))}}),Object(u.jsx)(i.fb,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var a=![!0,"responsive"].includes(n)&&"responsive";e(Object(x.a)(a))}}),Object(u.jsx)(i.y,{className:"d-md-down-none mr-auto",children:Object(u.jsx)(i.z,{className:"px-3",children:Object(u.jsx)(i.A,{to:"/dashboard",children:"Dashboard"})})}),Object(u.jsx)(i.y,{className:"px-3",children:Object(u.jsx)(N,{})})]})},g=a(733),y=a(51),v=a(190),N=function(){var e=Object(l.c)((function(e){return e.user.data.first_name?e.user.data.first_name+" "+e.user.data.last_name:"loading..."})),n=Object(l.c)((function(e){return e.user.data.profile_pic})),a=Object(r.g)(),t=Object(l.b)();return Object(u.jsxs)(i.o,{inNav:!0,className:"c-header-nav-items mx-2",direction:"down",children:[Object(u.jsxs)(i.r,{className:"c-header-nav-link",caret:!1,children:[Object(u.jsx)("div",{className:"c-avatar",children:Object(u.jsx)(i.B,{src:null!=n?y.b+n:"assets/images/avatar.png",className:"c-avatar-img",alt:""})}),Object(u.jsx)("span",{style:{marginLeft:"8px"},children:e})]}),Object(u.jsxs)(i.q,{className:"pt-0",placement:"bottom-end",children:[Object(u.jsx)(i.p,{header:!0,tag:"div",color:"light",className:"text-center",children:Object(u.jsx)("strong",{children:"Account"})}),Object(u.jsxs)(i.p,{onClick:function(){y.a.get("logout/"+localStorage.getItem("user_id")+"/").then((function(e){console.log(e.status),!0===e.data.success?(localStorage.clear(),t(Object(v.c)()),a.push("/login")):401==e.status&&(localStorage.clear(),a.push("/login"))})).catch((function(e){"401"==e.response.status&&(localStorage.clear(),a.push("/login"))}))},children:[Object(u.jsx)(g.b,{name:"cil-account-logout",className:"mfe-2"}),"Logout"]})]})]})},S=(a(792),function(){var e=Object(l.b)(),n=Object(r.g)(),a=Object(l.c)((function(e){return e.sidebar.sidebarShow})),o=c.a.useState(""),d=Object(s.a)(o,2),b=d[0],j=d[1];return Object(t.useEffect)((function(){j(localStorage.getItem("group"))}),[]),Object(u.jsxs)(i.V,{show:a,onShowChange:function(n){return e(Object(x.a)(n))},children:[Object(u.jsxs)(i.W,{className:"d-md-down-none text-center",to:"/",children:[Object(u.jsx)("img",{src:"assets/images/web-logo-2.png"}),Object(u.jsx)("h4",{id:"logoText",style:{marginTop:"8px",marginLeft:"5px"},className:"display-8 c-sidebar-brand-full",children:"The Accountibility Badge"})]}),"admin"==b&&Object(u.jsxs)(i.Y,{children:[Object(u.jsx)(i.Z,{to:"/dashboard",icon:"cil-speedometer",name:"Dashboard"}),Object(u.jsx)(i.ab,{children:"Administration"}),Object(u.jsx)(i.Z,{to:"/dashboard/employees",onClick:function(){n.push("/dashboard/users/show")},icon:"cil-group",name:"Employees"}),Object(u.jsx)(i.Z,{to:"/dashboard/badges",icon:"cil-badge",name:"Badges"}),Object(u.jsx)(i.Z,{to:"/dashboard/scan-history",icon:"cil-people",name:"Scans"}),Object(u.jsx)(i.Z,{to:"/dashboard/sitecontrol",icon:"cil-control",name:"Site Control"}),Object(u.jsx)(i.Z,{to:"/dashboard/time",icon:"cil-clock",name:"Time"}),Object(u.jsx)(i.Z,{to:"/dashboard/account",icon:"cil-calculator",name:"Account"}),Object(u.jsx)(i.Z,{to:"/dashboard/billing",icon:"cil-money",name:"Billing"}),Object(u.jsx)(i.Z,{to:"/dashboard/contacts",icon:"cil-people",name:"Contacts"})]}),"officer"==b&&Object(u.jsxs)(i.Y,{children:[Object(u.jsx)(i.Z,{to:"/dashboard",icon:"cil-speedometer",name:"Dashboard"}),Object(u.jsx)(i.ab,{children:"Personnel Account"}),Object(u.jsx)(i.Z,{to:"/dashboard/account/personal",onClick:function(){n.push("/dashboard/account/personal")},icon:"cil-notes",name:"Account"}),Object(u.jsx)(i.Z,{to:"/dashboard/account/time",onClick:function(){n.push("/dashboard/account/time")},icon:"cil-clock",name:"Time"}),Object(u.jsx)(i.Z,{to:"/dashboard/account/badge",onClick:function(){n.push("/dashboard/account/badge")},icon:"cil-credit-card",name:"My Badge"}),Object(u.jsx)(i.Z,{to:"/dashboard/account/contacts",onClick:function(){n.push("/dashboard/account/contacts")},icon:"cil-people",name:"Contacts"})]}),Object(u.jsx)(i.X,{className:"c-d-md-down-none"})]})}),w=c.a.memo(S),k=a(417);a(25),a(45),a(822);a(795);var z=a(193),C=a(194),Z=a(195),A=a(428);n.default=function(){var e=Object(A.b)(),n=e.enqueueSnackbar,a=(e.closeSnackbar,Object(l.b)()),c=(Object(r.g)(),new k.WebSocketBridge);return Object(t.useEffect)((function(){a(Object(v.b)(localStorage.getItem("user_id"))),c.connect("ws://103.123.8.52:8075/nfc/notifications"),c.addEventListener("message",(function(e){console.log(e.data),"review.notification"==e.data.type?(n(e.data.officer_name+" got rated by "+e.data.name,{variant:"info"}),a(Object(Z.b)())):(a(Object(z.b)()),a(Object(C.b)()),n(e.data.officer_name+"'s badge ("+e.data.badge_number+") got scanned",{variant:"info"}))}))}),[]),Object(u.jsxs)(u.Fragment,{children:[!1===(null!==localStorage.getItem(y.f)&&""!==localStorage.getItem(y.f))&&Object(u.jsx)(r.a,{to:"/login"}),Object(u.jsxs)("div",{className:"c-app c-default-layout",children:[Object(u.jsx)(w,{}),Object(u.jsxs)("div",{className:"c-wrapper",children:[Object(u.jsx)(O,{}),Object(u.jsx)("div",{className:"c-body",children:Object(u.jsx)(h,{})}),Object(u.jsx)(f,{})]})]})]})}}}]);
//# sourceMappingURL=13.054e6949.chunk.js.map