(this["webpackJsonpusa-nfc-web-app"]=this["webpackJsonpusa-nfc-web-app"]||[]).push([[13],{757:function(e,t,a){},792:function(e,t,a){},869:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(33),s=a(735),r=a(23),l=a(732),i=(a(757),a(189)),d=[{path:"/dashboard",exact:!0,name:"Dashboard",component:c.a.lazy((function(){return Promise.all([a.e(2),a.e(3)]).then(a.bind(null,883))}))},{path:"/dashboard/employees",exact:!0,name:"Employees",component:c.a.lazy((function(){return a.e(23).then(a.bind(null,849))}))},{path:"/dashboard/employees/details",exact:!0,name:"Employee Details",component:c.a.lazy((function(){return a.e(22).then(a.bind(null,850))}))},{path:"/dashboard/employees/create",exact:!0,name:"Create Employee",component:c.a.lazy((function(){return a.e(21).then(a.bind(null,851))}))},{path:"/dashboard/badges/",exact:!0,name:"Badges",component:c.a.lazy((function(){return Promise.all([a.e(9),a.e(15)]).then(a.bind(null,884))}))},{path:"/dashboard/account/",exact:!0,name:"Account",component:c.a.lazy((function(){return a.e(14).then(a.bind(null,858))}))},{path:"/dashboard/contacts/",exact:!0,name:"Contacts",component:c.a.lazy((function(){return a.e(17).then(a.bind(null,859))}))},{path:"/dashboard/billing/",exact:!0,name:"Billing",component:c.a.lazy((function(){return a.e(16).then(a.bind(null,860))}))},{path:"/dashboard/time",exact:!0,name:"Time",component:c.a.lazy((function(){return a.e(20).then(a.bind(null,861))}))},{path:"/dashboard/sitecontrol",exact:!0,name:"Site Control",component:c.a.lazy((function(){return a.e(19).then(a.bind(null,862))}))},{path:"/dashboard/scan-history",exact:!0,name:"Scan History",component:c.a.lazy((function(){return a.e(27).then(a.bind(null,863))}))},{path:"/dashboard/account/personal",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(5).then(a.bind(null,864))}))}],b=[{path:"/dashboard",exact:!0,name:"Dashboard",component:c.a.lazy((function(){return Promise.all([a.e(2),a.e(3)]).then(a.bind(null,883))}))},{path:"/dashboard/account/personal",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(5).then(a.bind(null,864))}))},{path:"/dashboard/account/badge",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(25).then(a.bind(null,865))}))},{path:"/dashboard/account/time",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(26).then(a.bind(null,866))}))},{path:"/dashboard/account/contacts",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return a.e(24).then(a.bind(null,867))}))}],j=a(15),u=Object(j.jsx)("div",{className:"pt-3 text-center",children:Object(j.jsx)("div",{className:"sk-spinner sk-spinner-pulse"})}),h=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],i=t[1];return c.a.useEffect((function(){switch(localStorage.getItem("group")){case"admin":i(d);break;case"officer":i(b)}}),[]),Object(j.jsxs)("main",{className:"c-main",children:[Object(j.jsx)("div",{class:"hero-image"}),Object(j.jsx)(l.m,{className:"mt-4",children:Object(j.jsx)(n.Suspense,{fallback:u,children:Object(j.jsxs)(r.d,{children:[a.map((function(e,t){return e.component&&Object(j.jsx)(r.b,{path:e.path,exact:e.exact,name:e.name,render:function(t){return Object(j.jsx)(l.s,{children:Object(j.jsx)(e.component,Object(o.a)({},t))})}},t)})),Object(j.jsx)(r.a,{from:"/",to:"/dashboard"})]})})})]})},m=c.a.memo(h),p=function(){return Object(j.jsx)(l.t,{fixed:!1,children:Object(j.jsxs)("div",{className:"mfs-auto",children:[Object(j.jsx)("span",{className:"mr-1",children:"Powered by"}),Object(j.jsx)("a",{href:"https://theaccountabilitybadge.com/",target:"_blank",rel:"noopener noreferrer",children:"ISK"})]})})},O=c.a.memo(p),x=a(196),f=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.sidebar.sidebarShow}));return c.a.useEffect((function(){console.log("sidebar --- ",t)}),[]),Object(j.jsxs)(l.x,{withSubheader:!0,children:[Object(j.jsx)(l.fb,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var a=!![!1,"responsive"].includes(t)||"responsive";e(Object(x.a)(a))}}),Object(j.jsx)(l.fb,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var a=![!0,"responsive"].includes(t)&&"responsive";e(Object(x.a)(a))}}),Object(j.jsx)(l.y,{className:"d-md-down-none mr-auto",children:Object(j.jsx)(l.z,{className:"px-3",children:Object(j.jsx)(l.A,{to:"/dashboard",children:"Dashboard"})})}),Object(j.jsx)(l.y,{className:"px-3",children:Object(j.jsx)(S,{})})]})},g=a(733),y=a(51),v=a(190),S=function(){var e=Object(i.c)((function(e){return e.user.data.first_name?e.user.data.first_name+" "+e.user.data.last_name:"loading..."})),t=Object(i.c)((function(e){return e.user.data.profile_pic})),a=Object(r.g)(),n=Object(i.b)();return Object(j.jsxs)(l.o,{inNav:!0,className:"c-header-nav-items mx-2",direction:"down",children:[Object(j.jsxs)(l.r,{className:"c-header-nav-link",caret:!1,children:[Object(j.jsx)("div",{className:"c-avatar",children:Object(j.jsx)(l.B,{src:null!=t?y.b+t:"assets/images/avatar.png",className:"c-avatar-img",alt:""})}),Object(j.jsx)("span",{style:{marginLeft:"8px"},children:e})]}),Object(j.jsxs)(l.q,{className:"pt-0",placement:"bottom-end",children:[Object(j.jsx)(l.p,{header:!0,tag:"div",color:"light",className:"text-center",children:Object(j.jsx)("strong",{children:"Account"})}),Object(j.jsxs)(l.p,{onClick:function(){y.a.get("logout/"+localStorage.getItem("user_id")+"/").then((function(e){console.log(e.status),!0===e.data.success?(localStorage.clear(),n(Object(v.c)()),a.push("/login")):401==e.status&&(localStorage.clear(),a.push("/login"))})).catch((function(e){"401"==e.response.status&&(localStorage.clear(),a.push("/login"))}))},children:[Object(j.jsx)(g.b,{name:"cil-account-logout",className:"mfe-2"}),"Logout"]})]})]})},N=(a(792),function(){var e=Object(i.b)(),t=Object(r.g)(),a=Object(i.c)((function(e){return e.sidebar.sidebarShow})),o=c.a.useState(""),d=Object(s.a)(o,2),b=d[0],u=d[1];return Object(n.useEffect)((function(){u(localStorage.getItem("group"))}),[]),Object(j.jsxs)(l.V,{show:a,onShowChange:function(t){return e(Object(x.a)(t))},children:[Object(j.jsxs)(l.W,{className:"d-md-down-none text-center",to:"/",children:[Object(j.jsx)("img",{src:"assets/images/web-logo-2.png"}),Object(j.jsx)("h4",{id:"logoText",style:{marginTop:"8px",marginLeft:"5px"},className:"display-8 c-sidebar-brand-full",children:"The Accountibility Badge"})]}),"admin"==b&&Object(j.jsxs)(l.Y,{children:[Object(j.jsx)(l.Z,{to:"/dashboard",icon:"cil-speedometer",name:"Dashboard"}),Object(j.jsx)(l.ab,{children:"Administration"}),Object(j.jsx)(l.Z,{to:"/dashboard/employees",onClick:function(){t.push("/dashboard/users/show")},icon:"cil-group",name:"Employees"}),Object(j.jsx)(l.Z,{to:"/dashboard/badges",icon:"cil-badge",name:"Badges"}),Object(j.jsx)(l.Z,{to:"/dashboard/scan-history",icon:"cil-people",name:"Scans"}),Object(j.jsx)(l.Z,{to:"/dashboard/sitecontrol",icon:"cil-control",name:"Site Control"}),Object(j.jsx)(l.Z,{to:"/dashboard/time",icon:"cil-clock",name:"Time"}),Object(j.jsx)(l.Z,{to:"/dashboard/account",icon:"cil-calculator",name:"Account"}),Object(j.jsx)(l.Z,{to:"/dashboard/billing",icon:"cil-money",name:"Billing"}),Object(j.jsx)(l.Z,{to:"/dashboard/contacts",icon:"cil-people",name:"Contacts"})]}),"officer"==b&&Object(j.jsxs)(l.Y,{children:[Object(j.jsx)(l.Z,{to:"/dashboard",icon:"cil-speedometer",name:"Dashboard"}),Object(j.jsx)(l.ab,{children:"Personnel Account"}),Object(j.jsx)(l.Z,{to:"/dashboard/account/personal",onClick:function(){t.push("/dashboard/account/personal")},icon:"cil-notes",name:"Account"}),Object(j.jsx)(l.Z,{to:"/dashboard/account/time",onClick:function(){t.push("/dashboard/account/time")},icon:"cil-clock",name:"Time"}),Object(j.jsx)(l.Z,{to:"/dashboard/account/badge",onClick:function(){t.push("/dashboard/account/badge")},icon:"cil-credit-card",name:"My Badge"}),Object(j.jsx)(l.Z,{to:"/dashboard/account/contacts",onClick:function(){t.push("/dashboard/account/contacts")},icon:"cil-people",name:"Contacts"})]}),Object(j.jsx)(l.X,{className:"c-d-md-down-none"})]})}),w=c.a.memo(N),k=a(417),C=a(25),z=a.n(C),A=a(45),E=a(822);var Z=function(e){var t=e.text;return Object(j.jsx)("div",{children:t})},_=function(e){var t=Object(n.useState)({}),a=Object(s.a)(t,2),o=a[0],r=a[1],i=Object(n.useState)([]),d=Object(s.a)(i,2),b=(d[0],d[1]),u=Object(n.useState)({borderColor:"",borderStyle:""}),h=Object(s.a)(u,2),m=(h[0],h[1]),p=Object(n.useState)(),O=Object(s.a)(p,2),x=O[0],f=O[1];return c.a.useEffect((function(){switch(console.log("props data --- ",e.data),e.data.mood){case"Emergency":f("Emergency Level 1"),m({borderColor:"yellow",borderStyle:"solid"});break;case"Dangerous":f("Emergency Level 2"),m({borderColor:"red",borderStyle:"solid"});break;case"Most dangerous":f("Emergency Level 3"),m({borderColor:"#8b0000",borderStyle:"solid"});break;case"Much more dangerous":f("Emergency Level 4"),m({borderColor:"black",borderStyle:"solid"})}y.e.get("profile/details/"+e.data.user_id+"/").then(function(){var e=Object(A.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("lat from res --- ",t.data.data),r(t.data.data),b([Number(t.data.data.lat),Number(t.data.data.lng)]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{id:"wrapper",children:["Status: ",x,Object(j.jsxs)(l.e,{children:[Object(j.jsx)(l.i,{children:Object(j.jsx)("h3",{children:"Details of Card Owner"})}),Object(j.jsxs)(l.f,{children:[Object(j.jsx)(l.T,{className:"justify-content-center mb-3",children:Object(j.jsx)(l.l,{children:Object(j.jsx)(l.B,{className:"mx-auto rounded-circle",style:{height:"100px",width:"100px"},shape:"rounded",src:y.b+o.profile_pic})})}),Object(j.jsx)(l.T,{children:Object(j.jsx)(l.l,{children:Object(j.jsxs)("p",{className:"text-left",children:[Object(j.jsx)("strong",{children:"Name :"})," ",o.first_name+" "+o.last_name,Object(j.jsx)("br",{}),Object(j.jsx)("strong",{children:"Email :"})," ",o.email,Object(j.jsx)("br",{}),Object(j.jsx)("strong",{children:"Phone :"})," ",o.phone,Object(j.jsx)("br",{}),Object(j.jsx)("strong",{children:"Registration :"})," ",o.registration,Object(j.jsx)("br",{}),Object(j.jsx)("strong",{children:"Address :"})," ",o.address,Object(j.jsx)("br",{})]})})}),Object(j.jsx)(l.T,{children:Object(j.jsxs)("div",{style:{height:"250px",width:"100%"},children:[Object(j.jsxs)("div",{className:"mb-2",children:["Lat : ",o.lat," & Lng: ",o.lng," "]}),Object(j.jsx)(E.a,{bootstrapURLKeys:{key:"AIzaSyCbynC4V9qRGyQTR5-ssW8qb0yX4oNNnKc"},defaultCenter:{lat:23.7104,lng:90.4074},defaultZoom:11,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){e.map,e.maps},children:Object(j.jsx)(Z,{lat:23.7104,lng:90.4074})})]})})]})]})]})})},L=a(795),T=a.n(L),I=a(193),B=a(194),D=a(195),P=a(428);t.default=function(){var e=Object(P.b)(),t=e.enqueueSnackbar,a=(e.closeSnackbar,Object(i.b)()),c=(Object(r.g)(),new k.WebSocketBridge);return Object(n.useEffect)((function(){a(Object(v.b)(localStorage.getItem("user_id"))),c.connect("ws://103.123.8.52:8075/nfc/notifications"),c.addEventListener("message",(function(e){console.log(e.data),"review.notification"==e.data.type?(t(e.data.officer_name+" got rated by "+e.data.name,{variant:"info"}),a(Object(D.b)())):(a(Object(I.b)()),a(Object(B.b)()),t(e.data.officer_name+"'s badge ("+e.data.badge_number+") got scanned",{variant:"info"}),T()({content:Object(j.jsx)(_,{data:e.data}),buttons:["Close"]}))}))}),[]),Object(j.jsxs)(j.Fragment,{children:[!1===(null!==localStorage.getItem(y.f)&&""!==localStorage.getItem(y.f))&&Object(j.jsx)(r.a,{to:"/login"}),Object(j.jsxs)("div",{className:"c-app c-default-layout",children:[Object(j.jsx)(w,{}),Object(j.jsxs)("div",{className:"c-wrapper",children:[Object(j.jsx)(f,{}),Object(j.jsx)("div",{className:"c-body",children:Object(j.jsx)(m,{})}),Object(j.jsx)(O,{})]})]})]})}}}]);
//# sourceMappingURL=13.3420ad0e.chunk.js.map