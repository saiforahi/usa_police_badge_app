(this["webpackJsonpusa-nfc-web-app"]=this["webpackJsonpusa-nfc-web-app"]||[]).push([[13],{740:function(e,t,n){"use strict";var a=n(18),c=n.n(a),o=n(31),s=n(735),r=n(0),i=n.n(r),d=n(733),l=(n(734),n(831)),b=n(40),u=n(16);var j=function(e){var t=e.text;return Object(u.jsx)("div",{children:t})};t.a=function(e){var t=Object(r.useState)({}),n=Object(s.a)(t,2),a=n[0],h=n[1],m=Object(r.useState)([]),p=Object(s.a)(m,2),O=(p[0],p[1]),f=Object(r.useState)({borderColor:"",borderStyle:""}),x=Object(s.a)(f,2),g=(x[0],x[1],Object(r.useState)()),y=Object(s.a)(g,2);y[0],y[1];return i.a.useEffect((function(){console.log("props data --- ",e.data),e.data.user_id?b.e.get("profile/details/"+e.data.user_id+"/").then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("lat from res --- ",t.data.data),h(t.data.data),O([Number(t.data.data.lat),Number(t.data.data.lng)]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):b.e.get("profile/details/"+e.notification.user_id+"/").then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("lat from res --- ",t.data.data),h(t.data.data),O([Number(t.data.data.lat),Number(t.data.data.lng)]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{id:"wrapper",children:Object(u.jsxs)(d.e,{children:[Object(u.jsx)(d.i,{children:Object(u.jsx)("h3",{children:"Details of Card Owner"})}),Object(u.jsxs)(d.f,{children:[Object(u.jsx)(d.T,{className:"justify-content-center mb-3",children:Object(u.jsx)(d.l,{children:Object(u.jsx)(d.B,{className:"mx-auto rounded-circle",style:{height:"100px",width:"100px"},shape:"rounded",src:b.b+a.profile_pic})})}),Object(u.jsx)(d.T,{children:Object(u.jsx)(d.l,{children:Object(u.jsxs)("p",{className:"text-left",children:[Object(u.jsx)("strong",{children:"Name :"})," ",a.first_name+" "+a.last_name,Object(u.jsx)("br",{}),Object(u.jsx)("strong",{children:"Email :"})," ",a.email,Object(u.jsx)("br",{}),Object(u.jsx)("strong",{children:"Phone :"})," ",a.phone,Object(u.jsx)("br",{}),Object(u.jsx)("strong",{children:"Registration :"})," ",a.registration,Object(u.jsx)("br",{}),Object(u.jsx)("strong",{children:"Address :"})," ",a.address,Object(u.jsx)("br",{})]})})}),Object(u.jsx)(d.T,{children:Object(u.jsxs)("div",{style:{height:"250px",width:"100%"},children:[Object(u.jsxs)("div",{className:"mb-2",children:["Lat : ",a.lat," & Lng: ",a.lng," "]}),Object(u.jsx)(l.a,{bootstrapURLKeys:{key:"AIzaSyCbynC4V9qRGyQTR5-ssW8qb0yX4oNNnKc"},defaultCenter:{lat:23.7104,lng:90.4074},defaultZoom:11,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){e.map,e.maps},children:Object(u.jsx)(j,{lat:23.7104,lng:90.4074})})]})})]})]})})})}},763:function(e,t,n){},798:function(e,t,n){},800:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=800},882:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(34),s=n(735),r=n(23),i=n(733),d=(n(763),n(189)),l=[{path:"/dashboard",exact:!0,name:"Dashboard",component:c.a.lazy((function(){return Promise.all([n.e(2),n.e(14)]).then(n.bind(null,858))}))},{path:"/dashboard/employees",exact:!0,name:"Employees",component:c.a.lazy((function(){return n.e(27).then(n.bind(null,859))}))},{path:"/dashboard/employees/details",exact:!0,name:"Employee Details",component:c.a.lazy((function(){return n.e(25).then(n.bind(null,860))}))},{path:"/dashboard/employees/create",exact:!0,name:"Create Employee",component:c.a.lazy((function(){return n.e(24).then(n.bind(null,861))}))},{path:"/dashboard/badges/",exact:!0,name:"Badges",component:c.a.lazy((function(){return Promise.all([n.e(9),n.e(17)]).then(n.bind(null,896))}))},{path:"/dashboard/account/",exact:!0,name:"Account",component:c.a.lazy((function(){return n.e(16).then(n.bind(null,868))}))},{path:"/dashboard/contacts/",exact:!0,name:"Contacts",component:c.a.lazy((function(){return n.e(19).then(n.bind(null,897))}))},{path:"/dashboard/billing/",exact:!0,name:"Billing",component:c.a.lazy((function(){return n.e(18).then(n.bind(null,869))}))},{path:"/dashboard/time",exact:!0,name:"Time",component:c.a.lazy((function(){return n.e(23).then(n.bind(null,870))}))},{path:"/dashboard/sitecontrol",exact:!0,name:"Site Control",component:c.a.lazy((function(){return n.e(22).then(n.bind(null,871))}))},{path:"/dashboard/scan-history",exact:!0,name:"Scan History",component:c.a.lazy((function(){return n.e(32).then(n.bind(null,872))}))},{path:"/dashboard/account/personal",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return n.e(3).then(n.bind(null,873))}))},{path:"/dashboard/departments",exact:!0,name:"Departments",component:c.a.lazy((function(){return n.e(26).then(n.bind(null,874))}))}],b=[{path:"/dashboard",exact:!0,name:"Dashboard",component:c.a.lazy((function(){return Promise.all([n.e(2),n.e(15)]).then(n.bind(null,875))}))},{path:"/dashboard/account/personal",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return n.e(3).then(n.bind(null,873))}))},{path:"/dashboard/account/badge",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return n.e(29).then(n.bind(null,876))}))},{path:"/dashboard/account/time",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return n.e(31).then(n.bind(null,877))}))},{path:"/dashboard/account/contacts",exact:!0,name:"Officer Account",component:c.a.lazy((function(){return n.e(21).then(n.bind(null,878))}))},{path:"/dashboard/officer/contacts/edit",exact:!0,name:"Edit Contact",component:c.a.lazy((function(){return n.e(28).then(n.bind(null,879))}))},{path:"/dashboard/officer/scans/history",exact:!0,name:"Scan History",component:c.a.lazy((function(){return n.e(30).then(n.bind(null,880))}))}],u=n(16),j=Object(u.jsx)("div",{className:"pt-3 text-center",children:Object(u.jsx)("div",{className:"sk-spinner sk-spinner-pulse"})}),h=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],d=t[1];return c.a.useEffect((function(){switch(localStorage.getItem("group")){case"admin":d(l);break;case"officer":d(b)}}),[]),Object(u.jsxs)("main",{className:"c-main",children:[Object(u.jsx)("div",{class:"hero-image"}),Object(u.jsx)(i.m,{className:"mt-4",children:Object(u.jsx)(a.Suspense,{fallback:j,children:Object(u.jsxs)(r.d,{children:[n.map((function(e,t){return e.component&&Object(u.jsx)(r.b,{path:e.path,exact:e.exact,name:e.name,render:function(t){return Object(u.jsx)(i.s,{children:Object(u.jsx)(e.component,Object(o.a)({},t))})}},t)})),Object(u.jsx)(r.a,{from:"/",to:"/dashboard"})]})})})]})},m=c.a.memo(h),p=function(){return Object(u.jsx)(i.t,{fixed:!1,children:Object(u.jsxs)("div",{className:"mfs-auto",children:[Object(u.jsx)("span",{className:"mr-1",children:"Powered by"}),Object(u.jsx)("a",{href:"https://theaccountabilitybadge.com/",target:"_blank",rel:"noopener noreferrer",children:"ISK"})]})})},O=c.a.memo(p),f=n(199),x=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.sidebar.sidebarShow}));return c.a.useEffect((function(){console.log("sidebar --- ",t)}),[]),Object(u.jsxs)(i.x,{withSubheader:!0,children:[Object(u.jsx)(i.fb,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var n=!![!1,"responsive"].includes(t)||"responsive";e(Object(f.a)(n))}}),Object(u.jsx)(i.fb,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var n=![!0,"responsive"].includes(t)&&"responsive";e(Object(f.a)(n))}}),Object(u.jsx)(i.y,{className:"d-md-down-none mr-auto",children:Object(u.jsx)(i.z,{className:"px-3",children:Object(u.jsx)(i.A,{to:"/dashboard",children:"Dashboard"})})}),Object(u.jsx)(i.y,{className:"px-3",children:Object(u.jsx)(N,{})})]})},g=n(734),y=n(40),v=n(190),N=function(){var e=Object(d.c)((function(e){return e.user.data.first_name?e.user.data.first_name+" "+e.user.data.last_name:"loading..."})),t=Object(d.c)((function(e){return e.user.data.profile_pic})),n=Object(r.g)(),a=Object(d.b)();return Object(u.jsxs)(i.o,{inNav:!0,className:"c-header-nav-items mx-2",direction:"down",children:[Object(u.jsxs)(i.r,{className:"c-header-nav-link",caret:!1,children:[Object(u.jsx)("div",{className:"c-avatar",children:Object(u.jsx)(i.B,{src:null!=t?y.b+t:"assets/images/avatar.png",className:"c-avatar-img",alt:""})}),Object(u.jsx)("span",{style:{marginLeft:"8px"},children:e})]}),Object(u.jsxs)(i.q,{className:"pt-0",placement:"bottom-end",children:[Object(u.jsx)(i.p,{header:!0,tag:"div",color:"light",className:"text-center",children:Object(u.jsx)("strong",{children:"Account"})}),Object(u.jsxs)(i.p,{onClick:function(){y.a.get("logout/"+localStorage.getItem("user_id")+"/").then((function(e){console.log(e.status),!0===e.data.success?(localStorage.clear(),a(Object(v.c)()),n.push("/login")):401==e.status&&(localStorage.clear(),n.push("/login"))})).catch((function(e){"401"==e.response.status&&(localStorage.clear(),n.push("/login"))}))},children:[Object(u.jsx)(g.b,{name:"cil-account-logout",className:"mfe-2"}),"Logout"]})]})]})},w=(n(798),function(){var e=Object(d.b)(),t=Object(r.g)(),n=Object(d.c)((function(e){return e.sidebar.sidebarShow})),o=Object(d.c)((function(e){return e.user.data.badge_number})),l=c.a.useState(""),b=Object(s.a)(l,2),j=b[0],h=b[1];return Object(a.useEffect)((function(){h(localStorage.getItem("group"))}),[]),Object(u.jsxs)(i.V,{show:n,onShowChange:function(t){return e(Object(f.a)(t))},children:[Object(u.jsx)(i.W,{className:"d-md-down-none text-center",to:"/",children:Object(u.jsx)("img",{src:"assets/images/nypd.png",className:"sidebar-brand"})}),"officer"==j&&Object(u.jsxs)(i.W,{className:"d-md-down-none text-center",children:["Badge : ",o]}),"admin"==j&&Object(u.jsxs)(i.Y,{children:[Object(u.jsx)(i.Z,{to:"/dashboard",icon:"cil-speedometer",name:"Dashboard"}),Object(u.jsx)(i.ab,{children:"Administration"}),Object(u.jsx)(i.Z,{to:"/dashboard/employees",onClick:function(){t.push("/dashboard/users/show")},icon:"cil-group",name:"Employees"}),Object(u.jsx)(i.Z,{to:"/dashboard/departments",icon:"cil-control",name:"Departments"}),Object(u.jsx)(i.Z,{to:"/dashboard/badges",icon:"cil-badge",name:"Badges"}),Object(u.jsx)(i.Z,{to:"/dashboard/scan-history",icon:"cil-people",name:"Scans"}),Object(u.jsx)(i.Z,{to:"/dashboard/sitecontrol",icon:"cil-control",name:"Site Control"}),Object(u.jsx)(i.Z,{to:"/dashboard/time",icon:"cil-clock",name:"Time"}),Object(u.jsx)(i.Z,{to:"/dashboard/account",icon:"cil-calculator",name:"Account"}),Object(u.jsx)(i.Z,{to:"/dashboard/billing",icon:"cil-money",name:"Billing"}),Object(u.jsx)(i.Z,{to:"/dashboard/contacts",icon:"cil-people",name:"Contacts"})]}),"officer"==j&&Object(u.jsxs)(i.Y,{children:[Object(u.jsx)(i.Z,{to:"/dashboard",icon:"cil-speedometer",name:"Dashboard"}),Object(u.jsx)(i.ab,{children:"Personal Account"}),Object(u.jsx)(i.Z,{to:"/dashboard/account/personal",onClick:function(){t.push("/dashboard/account/personal")},icon:"cil-notes",name:"Account"}),Object(u.jsx)(i.Z,{to:"/dashboard/account/time",onClick:function(){t.push("/dashboard/account/time")},icon:"cil-clock",name:"Time"}),Object(u.jsx)(i.Z,{to:"/dashboard/account/badge",onClick:function(){t.push("/dashboard/account/badge")},icon:"cil-credit-card",name:"My Badge"}),Object(u.jsx)(i.Z,{to:"/dashboard/account/contacts",onClick:function(){t.push("/dashboard/account/contacts")},icon:"cil-people",name:"Contacts"})]}),Object(u.jsx)(i.X,{className:"c-d-md-down-none"})]})}),S=c.a.memo(w),k=n(799),C=n(740),z=n(741),_=n.n(z),A=n(191),Z=n(193),E=n(194),D=n(429),I=n(198),B=n(192);t.default=function(){var e=Object(D.b)(),t=e.enqueueSnackbar,n=(e.closeSnackbar,Object(d.b)()),c=(Object(r.g)(),new k.WebSocketBridge);return Object(a.useEffect)((function(){n(Object(v.b)(localStorage.getItem("user_id"))),n(Object(I.b)()),n(Object(B.b)()),c.connect("ws://103.123.8.52:8075/nfc/notifications"),c.addEventListener("message",(function(e){console.log(e.data),"review.notification"==e.data.type?(t(e.data.officer_name+" got rated by "+e.data.name,{variant:"info"}),n(Object(E.b)())):(n(Object(A.b)()),n(Object(Z.b)()),t(e.data.officer_name+"'s badge ("+e.data.badge_number+") got scanned",{variant:"info"}),_()({content:Object(u.jsx)(C.a,{data:e.data}),buttons:[!1,"Close"]}))}))}),[]),Object(u.jsxs)(u.Fragment,{children:[!1===(null!==localStorage.getItem(y.f)&&""!==localStorage.getItem(y.f))&&Object(u.jsx)(r.a,{to:"/login"}),Object(u.jsxs)("div",{className:"c-app c-default-layout",children:[Object(u.jsx)(S,{}),Object(u.jsxs)("div",{className:"c-wrapper",children:[Object(u.jsx)(x,{}),Object(u.jsx)("div",{className:"c-body",children:Object(u.jsx)(m,{})}),Object(u.jsx)(O,{})]})]})]})}}}]);
//# sourceMappingURL=13.4225073d.chunk.js.map